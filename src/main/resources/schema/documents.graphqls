extend type Query {
    listDocumentsForDashboard: DashboardDocuments!
    listAllDocuments(since: String): [Document!]!
}

extend type Mutation {
    createDocument(input: NewDocumentInput!): Document!
    "Send document to a different sector"
    sendDocument(documents: [Int!]!, sector: String!): Response!
    "Receiver can signal that a document was received"
    acceptDocument(id: Int!): Document!
    acceptDocuments(ids: [Int!]!): [Document!]!
    "Receiver can signal that a document was not received"
    rejectDocument(id: Int!, description: String): Document!
    "Same as rejectDocument, but for the sender instead of the receiver"
    cancelDocument(id: Int!, description: String): Document!
    "Edit a document you created. Attempting to edit a document you don't own will result in an error."
    editDocument(input: ExistingDocumentInput!): Document!
    "Request a document that is not in your inventory"
    requestDocument(id: Int!, reason: String!): Response!

    deleteDocument(id: Int!): Response!
}

enum DocumentTypeEnum {
    FICHA
    PRONTUARIO
}

type DashboardDocuments {
    inventory: [Document!]!
    inbox: [Document!]!
    outbox: [Document!]!
    requests: [DocumentRequest!]!
}

enum DocumentRequestType {
    SOMEONE_REQUESTED_FROM_YOU
    YOU_REQUESTED
}

type DocumentRequest {
    type: DocumentRequestType!
    document: Document!
    reason: String!
    requestedBy: String!
    requestedAt: String!
    sector: String!
}

type Document {
    id: Int!
    number: Int!
    name: String!  @StringCase(case: UPPER) @AccentRemoverDirective
    type: DocumentTypeEnum!
    observations: String  @StringCase(case: UPPER) @AccentRemoverDirective
    sector: Sector
    history: [DocumentHistory!]!
    createdBy: String!
    createdAt: String!
    modifiedAt: String!
}
type DocumentHistory {
    action: DocumentActionEnum!
    user: String!
    sector: Sector!
    dateTime: String!
    description: String!
}

input NewDocumentInput {
    number: Int!
    name: String!
    type: DocumentTypeEnum!
    observations: String
}

input ExistingDocumentInput {
    id: Int!

    number: Int!
    name: String!
    type: DocumentTypeEnum!
    observations: String
}

enum DocumentActionEnum{
    CREATED
    SENT
    RECEIVED
    REJECTED
    REQUESTED
    MODIFIED
    DELETED
}
